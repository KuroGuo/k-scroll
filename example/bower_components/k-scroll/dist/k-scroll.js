!function(e,t){"use strict";function n(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame,e.cancelAnimationFrame=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.msCancelAnimationFrame;var r={};r.bind=function(r,a){function i(){Z.removeEventListener("mouseenter",D),Z.removeEventListener("mousedown",D),Z.removeEventListener("touchstart",D),Z.removeEventListener("mouseenter",m),Z.removeEventListener("mousedown",w),Z.removeEventListener("touchstart",w),e.removeEventListener("blur",w),Z.removeEventListener("mousewheel",h),Z.removeEventListener("touchstart",L),Z.removeEventListener("mousedown",L),Z.removeEventListener("k.dragstart",E),Z.removeEventListener("k.drag",f),Z.removeEventListener("touchend",g),Z.removeEventListener("mouseup",g),Z.removeEventListener("k.dragend",p),P.removeEventListener("mouseenter",s),P.removeEventListener("mouseleave",o),P.removeEventListener("touchstart",c),P.removeEventListener("mousedown",c),P.removeEventListener("touchend",d),P.removeEventListener("touchcancel",d),P.removeEventListener("k.dragstart",l),P.removeEventListener("k.drag",u),P.removeEventListener("k.dragend",v),e.removeEventListener("resize",b),t.removeEventListener("keydown",k)}function s(e){var t=e.currentTarget;t.classList.add("hover")}function o(e){var t=e.currentTarget;t.classList.remove("hover")}function c(e){e.preventDefault();var n=e.currentTarget;n.classList.add("active"),"mousedown"===e.type&&t.addEventListener("mouseup",d,!0)}function d(e){P.classList.remove("active"),"mouseup"===e.type&&t.removeEventListener("mouseup",d,!0)}function u(e){var t=z+e.deltaY*(x-S)/(S-V);t>C?t=C:G>t&&(t=G),T(t,!1,!1)}function l(e){var t=e.currentTarget;D(),z=H,t.classList.add("dragging")}function v(e){var t=e.currentTarget;t.classList.remove("dragging")}function m(){A()}function L(e){j=!1,"mousedown"===e.type?q.allowMouseDragScroll&&e.preventDefault():e.preventDefault()}function g(e){var t=e.currentTarget;j||(O=0,K=null,t.classList.add("sliding"),F())}function E(e){if(!e.dragTarget.classList.contains("scroll-bar")){if(!q.allowMouseDragScroll&&"mouse"===e.pointerType&&!e.ctrlKey)return void e.prevent();var t=e.currentTarget;e.state>0&&(t.classList.add("dragging"),j=!0)}}function f(e){e.dragTarget.classList.contains("scroll-bar")||(H>C?e.vy<=0&&(e.stepY/=1+Math.abs(H-C)/14):G>H&&e.vy>=0&&(e.stepY/=1+Math.abs(H-G)/14),I=-e.vy,H-=e.stepY,T(H,!1,!1))}function p(e){if(!e.dragTarget.classList.contains("scroll-bar")){var t=e.currentTarget;t.classList.remove("dragging"),O=I=-e.vy,K=null,t.classList.add("sliding"),F()}}function h(e){if(!e.ctrlKey){D(),e.preventDefault();var t=n(e),r=H-t*q.speed;r>C?r=C:G>r&&(r=G),I=0,T(r,!0,!0)}}function y(e){for(var t in e)void 0!==e[t]&&(q[t]=e[t])}function k(e){if(q.bindKey){switch(e.keyCode){case 33:H-=S-3;break;case 34:H+=S-3;break;case 38:H-=q.speed;break;case 40:H+=q.speed;break;default:return}D(),G>H?H=G:H>C&&(H=C),T(H,!0,!0)}}function b(){q.checkOnResize&&"none"!==Z.style.display&&(D(),H>C&&T(C))}function w(e){R&&(M(),"blur"!==e.type&&Math.abs(I)>.14&&(e.stopPropagation(),e.preventDefault())),I=0,Z.classList.remove("sliding"),e.ctrlKey&&"mousedown"===e.type&&e.preventDefault()}function D(){var t=e.getComputedStyle(Z),n=e.getComputedStyle(B);S=parseFloat(t.height),x=parseFloat(n.height),C=Math.max(0,x-S),Y=S/x,Y>=1&&(Y=0),V=Math.max(S*Y,4)}function F(t){var n,r,a;K&&(n=t-K,a=I*Math.pow(.95,n/(1e3/60)),r=H+(I+a)/2*n,T(r,!1,!1),I=a,H>C?0>=I?(I=(C-H)/200,0>O&&I>O?I=O:I>-.03&&(I=-.03)):(I-=3e-4*(H-C)*n,0>I&&(I=0)):G>H&&(I>=0?(I=(G-H)/200,O>0&&O>I?I=O:.03>I&&(I=.03)):(I-=3e-4*(H-G)*n,I>0&&(I=0)))),K=t,Math.abs(H-C)<.03?H=C:Math.abs(H-G)<.03&&(H=G),!Z.classList.contains("dragging")&&(Math.abs(I)>.03||H>C||G>H)?R=e.requestAnimationFrame(F):(I=0,Z.classList.remove("sliding"),e.cancelAnimationFrame(R),R=null)}function A(e){var t=H/(x-S);P.display=0>=Y?"none":"block",Velocity.hook(P,"height",V+"px"),Velocity(P,"stop");var n=(S-V)*t+"px";e?Velocity(P,{translateY:n},{duration:q.animationDuration,easing:q.animationEasing}):Velocity.hook(P,"translateY",n)}function T(e,t,n,r,a){H=e,M(),t?Velocity(B,{translateY:-H+"px"},{duration:r||q.animationDuration,easing:q.animationEasing,begin:function(){Z.classList.add("scrolling")},complete:function(){Z.classList.remove("scrolling"),"function"==typeof a&&a.call(this)}}):(Velocity.hook(B,"translateY",-H+"px"),"function"==typeof a&&a.call(this)),A(n)}function M(){e.cancelAnimationFrame(R),R=null,Velocity(B,"stop")}var q={animationDuration:200,animationEasing:[0,0,.58,1],speed:100,allowMouseDragScroll:!0,checkOnResize:!0,bindKey:!0};y(a);var x,S,V,C,Y,z,K,R,O,j,Z=r,B=Z.querySelector(".k-scroller"),P=t.createElement("span"),G=0,H=0,I=0;P.classList.add("scroll-bar"),Z.appendChild(P);var J;return"function"==typeof require?J=require("kDrag"):e.kDrag&&(J=e.kDrag),J.bind(Z),J.bind(P),Z.addEventListener("mouseenter",D),Z.addEventListener("mousedown",D),Z.addEventListener("touchstart",D),Z.addEventListener("mouseenter",m),Z.addEventListener("mousedown",w),Z.addEventListener("touchstart",w),e.addEventListener("blur",w),Z.addEventListener("mousewheel",h),Z.addEventListener("touchstart",L),Z.addEventListener("mousedown",L),Z.addEventListener("k.dragstart",E),Z.addEventListener("k.drag",f),Z.addEventListener("touchend",g),Z.addEventListener("mouseup",g),Z.addEventListener("k.dragend",p),P.addEventListener("mouseenter",s),P.addEventListener("mouseleave",o),P.addEventListener("touchstart",c),P.addEventListener("mousedown",c),P.addEventListener("touchend",d),P.addEventListener("touchcancel",d),P.addEventListener("k.dragstart",l),P.addEventListener("k.drag",u),P.addEventListener("k.dragend",v),e.addEventListener("resize",b),t.addEventListener("keydown",k),Velocity.hook(B,"translateZ","0.00001px"),Velocity.hook(P,"translateZ","0.00001px"),T(H,!1,!1),{unbind:i,configure:y,scrollTo:T,stopAnimation:M,refreshContext:D,resetscrollBarStyle:A,get maxScroll(){return C}}},"function"==typeof define?define("kScroll",function(){return r}):e.kScroll=r}(window,document);